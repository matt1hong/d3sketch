<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Great Lakes</title>
	<link href="https://fonts.googleapis.com/css?family=Mukta" rel="stylesheet">
	<link rel="stylesheet" href="css/scatterplot.css">
	<script src="./d3.min.js"></script>
</head>
<body>
<script src="scatterplot.js"></script>
<script>

// User exploration at the end
var slideNode = Array.prototype.slice.call(window.parent.document.querySelectorAll('section')).filter(d => d.className.includes("present"))[0]
var groupSelect = d3.select(slideNode).select('#group-select');
var regionSelect = d3.select(slideNode).select('#region-select');
groupSelect.on('change', function(e,i,option){ 
	update({
		group: option[0].value,
		region: regionSelect.node().value,
		circles: true,
		refX: true,
		refY: true,
		colorCircles: true
	})})
regionSelect.on('change', function(e,i,option){ 
	update({
		group: groupSelect.node().value,
		region: option[0].value,
		reset: true,
		circles: true,
		refX: true,
		refY: true,
		colorCircles: true
	})})

// Initial state
render({
	group: "black",
	region: "Great Lakes",
	circles: false,
	refX: true,
	refY: false,
	pointAt: [],
	colorCircles: false
});

// For Reveal.js
var _transitions = [{
	// First region
	transitionBackward: function(){ update({
		group: "black",
		region: "Great Lakes",
		circles: false,
		refX: true,
		refY: false,
		pointAt: [],
		colorCircles: false
	}) },
    transitionForward: function(){ update({
    	group: "black",
    	region: "Great Lakes",
		circles: true,
		refX: true,
		refY: false,
		pointAt: [],
		colorCircles: false
    }) },
    index: 0
},{
    transitionForward: function(){ update({
    	group: "black",
    	region: "Great Lakes",
		circles: true,
		refX: true,
		refY: false,
		pointAt: [],
		colorCircles: true
    }) },
    index: 1
},{
    transitionForward: function(){ update({
    	group: "asian",
    	region: "Great Lakes",
		circles: true,
		refX: true,
		refY: false,
		pointAt: [],
		colorCircles: true
    }) },
    index: 2
},{
	// Second region
	transitionBackward: function(){ update({
		group: "asian",
    	region: "Great Lakes",
    	reset: true,
		circles: true,
		refX: true,
		refY: false,
		pointAt: [],
		colorCircles: true
	}) },
    transitionForward: function(){ update({
    	group: "black",
    	region: "Atlantic",
    	reset: true,
		circles: true,
		refX: true,
		refY: false,
		pointAt: {"George Washington University":{x:5,y:10}},
		colorCircles: true
    }) },
    index: 3
},{
    transitionForward: function(){ update({
    	group: "black",
    	region: "Atlantic",
		circles: true,
		refX: true,
		refY: true,
		pointAt: [],
		colorCircles: true
    }) },
    index: 4
},{
    transitionForward: function(){ update({
    	group: "asian",
    	region: "Atlantic",
		circles: true,
		refX: true,
		refY: true,
		pointAt: [],
		colorCircles: true
    }) },
    index: 5
},{
	// Third region
	transitionBackward: function(){ update({
		group: "asian",
    	region: "Atlantic",
    	reset: true,
		circles: true,
		refX: true,
		refY: true,
		pointAt: [],
		colorCircles: true
	}) },
    transitionForward: function(){ update({
    	group: "black",
    	region: "South",
    	reset: true,
		circles: true,
		refX: true,
		refY: true,
		pointAt: [],
		colorCircles: true
    }) },
    index: 6
},{
    transitionForward: function(){ update({
    	group: "black",
    	region: "South",
		circles: true,
		refX: true,
		refY: true,
		pointAt: {
			"Duke University":{x:3,y:-10}, 
			"Vanderbilt University":{x:8,y:10},
			"Emory University":{x:6,y:8}
		},
		colorCircles: true
    }) },
    index: 7
},{
    transitionForward: function(){ update({
    	group: "asian",
    	region: "South",
		circles: true,
		refX: true,
		refY: true,
		pointAt: [],
		colorCircles: true
    }) },
    index: 8
},{
	// Exploration
	transitionBackward: function(){ update({
    	group: "asian",
    	region: "South",
    	reset: true,
		circles: true,
		refX: true,
		refY: true,
		pointAt: [],
		colorCircles: true
    }) },
    transitionForward: function(){ update({
    	group: "asian",
    	region: "South",
		circles: true,
		refX: true,
		refY: true,
		pointAt: [],
		colorCircles: true
    }) },
    index: 9
}]
</script>
</body>
</html>